dataSources:
  ds_0:
    dataSourceClassName: com.zaxxer.hikari.HikariDataSource
    driverClassName: com.mysql.jdbc.Driver
    jdbcUrl: jdbc:mysql://10.4.2.245:3306/sbtest_sharding?useSSL=false&useServerPrepStmts=true&cachePrepStmts=true&prepStmtCacheSize=8192&prepStmtCacheSqlLimit=1024
    username: root
    password: sphereEx@2021
    maximumPoolSize: 1024
    minimumIdle: 1024
  ds_1:
    dataSourceClassName: com.zaxxer.hikari.HikariDataSource
    driverClassName: com.mysql.jdbc.Driver
    jdbcUrl: jdbc:mysql://10.4.2.246:3306/sbtest_sharding?useSSL=false&useServerPrepStmts=true&cachePrepStmts=true&prepStmtCacheSize=8192&prepStmtCacheSqlLimit=1024
    username: root
    password: sphereEx@2021
    maximumPoolSize: 1024
    minimumIdle: 1024

props:
  max-connections-size-per-query: 10

rules:
  - !SHARDING
    tables:
      sbtest1:
        actualDataNodes: ds_${0..1}.sbtest1_${0..9}
        tableStrategy:
          standard:
            shardingColumn: id
            shardingAlgorithmName: table_inline_1
        keyGenerateStrategy:
          column: id
          keyGeneratorName: snowflake
      sbtest2:
        actualDataNodes: ds_${0..1}.sbtest2_${0..9}
        tableStrategy:
          standard:
            shardingColumn: id
            shardingAlgorithmName: table_inline_2
        keyGenerateStrategy:
          column: id
          keyGeneratorName: snowflake
      sbtest3:
        actualDataNodes: ds_${0..1}.sbtest3_${0..9}
        tableStrategy:
          standard:
            shardingColumn: id
            shardingAlgorithmName: table_inline_3
        keyGenerateStrategy:
          column: id
          keyGeneratorName: snowflake
      sbtest4:
        actualDataNodes: ds_${0..1}.sbtest4_${0..9}
        tableStrategy:
          standard:
            shardingColumn: id
            shardingAlgorithmName: table_inline_4
        keyGenerateStrategy:
          column: id
          keyGeneratorName: snowflake
      sbtest5:
        actualDataNodes: ds_${0..1}.sbtest5_${0..9}
        tableStrategy:
          standard:
            shardingColumn: id
            shardingAlgorithmName: table_inline_5
        keyGenerateStrategy:
          column: id
          keyGeneratorName: snowflake
      sbtest6:
        actualDataNodes: ds_${0..1}.sbtest6_${0..9}
        tableStrategy:
          standard:
            shardingColumn: id
            shardingAlgorithmName: table_inline_6
        keyGenerateStrategy:
          column: id
          keyGeneratorName: snowflake
      sbtest7:
        actualDataNodes: ds_${0..1}.sbtest7_${0..9}
        tableStrategy:
          standard:
            shardingColumn: id
            shardingAlgorithmName: table_inline_7
        keyGenerateStrategy:
          column: id
          keyGeneratorName: snowflake
      sbtest8:
        actualDataNodes: ds_${0..1}.sbtest8_${0..9}
        tableStrategy:
          standard:
            shardingColumn: id
            shardingAlgorithmName: table_inline_8
        keyGenerateStrategy:
          column: id
          keyGeneratorName: snowflake
      sbtest9:
        actualDataNodes: ds_${0..1}.sbtest9_${0..9}
        tableStrategy:
          standard:
            shardingColumn: id
            shardingAlgorithmName: table_inline_9
        keyGenerateStrategy:
          column: id
          keyGeneratorName: snowflake
      sbtest10:
        actualDataNodes: ds_${0..1}.sbtest10_${0..9}
        tableStrategy:
          standard:
            shardingColumn: id
            shardingAlgorithmName: table_inline_10
        keyGenerateStrategy:
          column: id
          keyGeneratorName: snowflake

    defaultDatabaseStrategy:
      standard:
        shardingColumn: id
        shardingAlgorithmName: database_inline

    shardingAlgorithms:
      database_inline:
        type: INLINE
        props:
          algorithm-expression: ds_${id & 1}
      table_inline_1:
        type: INLINE
        props:
          algorithm-expression: sbtest1_${id % 10}
      table_inline_2:
        type: INLINE
        props:
          algorithm-expression: sbtest2_${id % 10}
      table_inline_3:
        type: INLINE
        props:
          algorithm-expression: sbtest3_${id % 10}
      table_inline_4:
        type: INLINE
        props:
          algorithm-expression: sbtest4_${id % 10}
      table_inline_5:
        type: INLINE
        props:
          algorithm-expression: sbtest5_${id % 10}
      table_inline_6:
        type: INLINE
        props:
          algorithm-expression: sbtest6_${id % 10}
      table_inline_7:
        type: INLINE
        props:
          algorithm-expression: sbtest7_${id % 10}
      table_inline_8:
        type: INLINE
        props:
          algorithm-expression: sbtest8_${id % 10}
      table_inline_9:
        type: INLINE
        props:
          algorithm-expression: sbtest9_${id % 10}
      table_inline_10:
        type: INLINE
        props:
          algorithm-expression: sbtest10_${id % 10}
    keyGenerators:
      snowflake:
        type: SNOWFLAKE
        props:
          worker-id: 123
